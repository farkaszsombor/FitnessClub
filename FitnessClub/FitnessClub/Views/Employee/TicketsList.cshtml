@model FitnessClub.Models.TicketsClient

@{
    ViewBag.Title = "TicketsList";
    Layout = "~/Views/Employee/_EmployeeLayout.cshtml";
}



<div class="content">
    <div class="container">

        <div class="col-md-6 inserter">
            Beszuras
        </div>
        <div class="profile col-md-6">
            <div class="col-md-7">
                <p>Nev : <b>@Html.Encode(Model.Client.LastName) @Html.Encode(Model.Client.FirstName)</b></p>
                <p>Tel : <b>@Html.Encode(Model.Client.Phone)</b></p> <p>E-mail : <b>@Html.Encode(Model.Client.Email)</b></p>
                <p>CNP : <b>@Html.Encode(Model.Client.IdentityNumber)</b></p> <p>Sex : <b>@Html.Encode(Model.Client.Sex)</b></p>
            </div>
         
                <div class="col-md-5">
                    @if ((Model.Client.ImagePath != null) && (Model.Client.ImagePath != "nincs"))
                    {
                        <img src="@Url.Content(Model.Client.ImagePath)" alt="Logo" width="150px" />
                    }
                    else
                    {
                        <img src="@Url.Content("~/Content/Images/gym.png")" alt="Logo" width="150px" />
                    }
                </div>
            </div>
        </div>
 
    <div class="list-table">
        <div class="list-header">
            <p>Nev</p>
            <p>Kezdeti datum</p>
            <p>Lejarati datum</p>
            <p>Utolso belepes</p>
            <p>Belepesek szama</p>
        </div>
        @foreach (var item in Model.Tickets)
        {

            if(((item.EndDate == item.BuyingDate)&&item.RemaningLoginNum<=0)||((item.RemaningLoginNum==-1)&&item.EndDate<=DateTime.Now)||(item.RemaningLoginNum==-1)&&item.LastLoginDate.Day==DateTime.Now.Day||((item.RemaningLoginNum!=-1)&&(item.EndDate != item.BuyingDate)&&(item.EndDate<=DateTime.Now||item.RemaningLoginNum<=0)))
            {

            <div class="list-item disabled">
                <p>@Html.Encode(item.TicketName)</p>
                <p>@Html.Encode(item.StartDate)</p>
                @if(item.EndDate == item.BuyingDate)
                {
                <p>Alkalmas</p>
                }
                else
                {
                <p>@Html.Encode(item.EndDate)</p>
                }
                <p>@Html.Encode(item.LastLoginDate)</p>
                @if(item.RemaningLoginNum==-1)
                {
                <p>Datumos</p>
                }
                else
                {
                <p>@Html.Encode(item.RemaningLoginNum)</p>
                }
            </div>
            }
            else
            {
            <div class="list-item" >
                <p>@Html.Encode(item.TicketName)</p>
                <p>@Html.Encode(item.StartDate)</p>
                @if(item.EndDate == item.BuyingDate)
                {
                    <p>Alkalmas</p>
                }
                else
                {
                    if((item.EndDate - DateTime.Now).TotalDays <= 2)
                    {
                        <p style="color:red">@Html.Encode(item.EndDate)</p>
                    }
                    else
                    {
                        <p>@Html.Encode(item.EndDate)</p>
                    }
                }
                <p>@Html.Encode(item.LastLoginDate)</p>
                @if(item.RemaningLoginNum==-1)
                {
                    <p>Datumos</p>
                }
                else
                {
                    if(item.RemaningLoginNum<=2)
                    {
                        <p style="color:red">@Html.Encode(item.RemaningLoginNum)</p>
                    }
                    else
                    {
                        <p>@Html.Encode(item.RemaningLoginNum)</p>
                    }
                }
            </div>
            }
        }
    </div>
</div>

